CVEGEO = col_character(), Fecha = col_date(format = "%d/%m/%Y"),
MUNICIPIO = col_character(), NUEVOS = col_integer()),
locale = locale(encoding = "ISO-8859-1"))
casosacumdia <- filter(Casos,Fecha==Sys.Date())
casosacumdiaorder <- arrange(casosacumdia,CASOS, desc(MUNICIPIO))
casosacumdia2 <- mutate(casosacumdiaorder,id=CVEGEO)
casosmov <- filter(casosacumdia2,NUEVOS!=0)
Decesos <- read_csv("Decesosdiarios.csv",
col_types = cols(DECESOS = col_integer(),
CVEGEO = col_character(), Fecha = col_date(format = "%d/%m/%Y"),
MUNICIPIO = col_character(), NUEVOS = col_integer()),
locale = locale(encoding = "ISO-8859-1"))
decesosacumdia <- filter(Decesos,Fecha==Sys.Date())
decesosacumdiaorder <- arrange(decesosacumdia,DECESOS, desc(MUNICIPIO))
decesosacumdia2 <- mutate(decesosacumdiaorder,id=CVEGEO)
decesosacumdia3 <- rename(decesosacumdia2, NUEVOSD=NUEVOS)
decesosmov <- filter(decesosacumdia3,NUEVOSD!=0)
movtbl<-full_join(casosmov,decesosacumdia3)
movtbl<-full_join(movtbl,decesosmov)
write.csv(movtbl,'movtlb.csv')
casos_s <- group_by(Casos, CVEGEO, MUNICIPIO)
casos_ult <- casos_s %>% filter(NUEVOS!=0) %>% arrange(desc(Fecha)) %>% slice(1)
casos_ult_dias <- mutate(casos_ult, Dias_ult=as.numeric(Sys.Date()-Fecha))
casos_ult_dias <- mutate(casos_ult_dias, clasfdias=if_else(Dias_ult>14,4,(if_else(Dias_ult>7,3,if_else(Dias_ult>0,2,1)))))
casos_ult_dias <- mutate(casos_ult_dias, clasfdias=as.numeric(clasfdias))
casos_ult_dias <- mutate(casos_ult_dias,id=CVEGEO)
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.5, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_npg() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 31 de julio de 2020", caption ="/nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.5, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_npg() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 31 de julio de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
library(flexdashboard)
library(tidyverse)
library(extrafont)
library(scales)
library(plotly)
library(htmlwidgets)
library(showtext)
library(tint)
library(rgdal)
library(rgeos)
library(ggiraph)
library(miniUI)
library(units)
library(reactable)
library(zoo)
library(lubridate)
library(treemapify)
library(wesanderson)
library(ggsci)
Sonora.DF.hoy$label <- c(paste0(Sonora.DF.hoy$Estatus, "\n ",  Sonora.DF.hoy$Casos.confirmados, "\n ", (round((Sonora.DF.hoy$Casos.confirmados/(sum(Sonora.DF.hoy$Casos.confirmados))*100), digits = 1)),"%"))
ggplot(Sonora.DF.hoy, aes(area = Casos.confirmados, fill= Estatus, label= Sonora.DF.hoy$label)) + geom_treemap(color = "white", size=5) +
scale_fill_manual(values= c("#9BD7D7", "#D175A3", "#FAC090", "#95B3D7")) +
geom_treemap_text(family = "Lato", colour = "white", place = "topleft",
grow = FALSE) +
theme_void() +
theme(plot.title = (element_text(family = "Lato Black", size = 15, color = "#01A2AC")), rect = element_rect(fill = "transparent"),
legend.position = "none",
plot.background = element_rect(fill = "transparent", color = NA),
legend.key.height = unit (2, "cm"), axis.text = element_blank(),
legend.text = element_text(family = "Lato Light", size = 6, color = "black"),
legend.title = element_blank(),
plot.caption = element_text(family = "Lato Light", size = 8, color = "gray50"),
axis.title = element_blank()) +
labs(axis = NULL, y = NULL, x = NULL, title  = NULL,  fill = NULL, caption = NULL)
Sonora.DF.hoy$label <- c(paste0(Sonora.DF.hoy$Estatus, "\n ",  Sonora.DF.hoy$Casos.confirmados, "\n ", (round((Sonora.DF.hoy$Casos.confirmados/(sum(Sonora.DF.hoy$Casos.confirmados))*100), digits = 1)),"%"))
ggplot(Sonora.DF.hoy, aes(area = Casos.confirmados, fill= Estatus, label= Sonora.DF.hoy$label)) + geom_treemap(color = "white", size=5) +
scale_fill_manual(values= c("#9BD7D7", "#D175A3", "#FAC090", "#95B3D7")) +
geom_treemap_text(family = "Lato", colour = "white", place = "topleft",
grow = FALSE) +
theme_void() +
theme(plot.title = (element_text(family = "Lato Black", size = 15, color = "#01A2AC")), rect = element_rect(fill = "transparent"),
legend.position = "none",
plot.background = element_rect(fill = "transparent", color = NA),
legend.key.height = unit (2, "cm"), axis.text = element_blank(),
legend.text = element_text(family = "Lato Light", size = 6, color = "black"),
legend.title = element_blank(),
plot.caption = element_text(family = "Lato Light", size = 8, color = "gray50"),
axis.title = element_blank()) +
labs(axis = NULL, y = NULL, x = NULL, title  = NULL,  fill = NULL, caption = NULL)
Sonora.DF <- read_csv("ST_SonoraInformesCOVID.csv",
col_types = cols(Fecha = col_date(format = "%d/%m/%Y")))
Sonora.DF.hoy <- filter(Sonora.DF, Fecha == Sys.Date())
Sonora.DF.hoy <- select(Sonora.DF.hoy, Hospitalizados, Ambulatorios.Activos, Decesos, Recuperados)
Sonora.DF.hoy <- rename(Sonora.DF.hoy, "Ambulatorios activos"= Ambulatorios.Activos)
Sonora.DF.hoy <- gather(Sonora.DF.hoy, key= Estatus, value= Casos.confirmados)
Sonora.DF.hoy$label <- c(paste0(Sonora.DF.hoy$Estatus, "\n ",  Sonora.DF.hoy$Casos.confirmados, "\n ", (round((Sonora.DF.hoy$Casos.confirmados/(sum(Sonora.DF.hoy$Casos.confirmados))*100), digits = 1)),"%"))
ggplot(Sonora.DF.hoy, aes(area = Casos.confirmados, fill= Estatus, label= Sonora.DF.hoy$label)) + geom_treemap(color = "white", size=5) +
scale_fill_manual(values= c("#9BD7D7", "#D175A3", "#FAC090", "#95B3D7")) +
geom_treemap_text(family = "Lato", colour = "white", place = "topleft",
grow = FALSE) +
theme_void() +
theme(plot.title = (element_text(family = "Lato Black", size = 15, color = "#01A2AC")), rect = element_rect(fill = "transparent"),
legend.position = "none",
plot.background = element_rect(fill = "transparent", color = NA),
legend.key.height = unit (2, "cm"), axis.text = element_blank(),
legend.text = element_text(family = "Lato Light", size = 6, color = "black"),
legend.title = element_blank(),
plot.caption = element_text(family = "Lato Light", size = 8, color = "gray50"),
axis.title = element_blank()) +
labs(axis = NULL, y = NULL, x = NULL, title  = NULL,  fill = NULL, caption = NULL)
plot_ly(
type='treemap',
Casos.confirmados= Sonora.DF.hoy$Casos.confirmados,
values= Sonora.DF.hoy$Estatus,
domain=list(column=0))
)
library(readr)
Casos <- read_csv("Casosdiarios.csv",
col_types = cols(CASOS = col_integer(),
CVEGEO = col_character(), Fecha = col_date(format = "%d/%m/%Y"),
MUNICIPIO = col_character(), NUEVOS = col_integer()),
locale = locale(encoding = "ISO-8859-1"))
casosacumdia <- filter(Casos,Fecha==Sys.Date())
casosacumdiaorder <- arrange(casosacumdia,CASOS, desc(MUNICIPIO))
casosacumdia2 <- mutate(casosacumdiaorder,id=CVEGEO)
casosmov <- filter(casosacumdia2,NUEVOS!=0)
Decesos <- read_csv("Decesosdiarios.csv",
col_types = cols(DECESOS = col_integer(),
CVEGEO = col_character(), Fecha = col_date(format = "%d/%m/%Y"),
MUNICIPIO = col_character(), NUEVOS = col_integer()),
locale = locale(encoding = "ISO-8859-1"))
decesosacumdia <- filter(Decesos,Fecha==Sys.Date())
decesosacumdiaorder <- arrange(decesosacumdia,DECESOS, desc(MUNICIPIO))
decesosacumdia2 <- mutate(decesosacumdiaorder,id=CVEGEO)
decesosacumdia3 <- rename(decesosacumdia2, NUEVOSD=NUEVOS)
decesosmov <- filter(decesosacumdia3,NUEVOSD!=0)
movtbl<-full_join(casosmov,decesosacumdia3)
movtbl<-full_join(movtbl,decesosmov)
write.csv(movtbl,'movtlb.csv')
casos_s <- group_by(Casos, CVEGEO, MUNICIPIO)
casos_ult <- casos_s %>% filter(NUEVOS!=0) %>% arrange(desc(Fecha)) %>% slice(1)
casos_ult_dias <- mutate(casos_ult, Dias_ult=as.numeric(Sys.Date()-Fecha))
casos_ult_dias <- mutate(casos_ult_dias, clasfdias=if_else(Dias_ult>14,4,(if_else(Dias_ult>7,3,if_else(Dias_ult>0,2,1)))))
casos_ult_dias <- mutate(casos_ult_dias, clasfdias=as.numeric(clasfdias))
casos_ult_dias <- mutate(casos_ult_dias,id=CVEGEO)
capa_munison <- readOGR("Shapes", layer="MUNSON")
capa_son <- readOGR("Shapes", layer="ENTSON")
capa_munison_df <- fortify(capa_munison, region="CVEGEO")
capa_munison_casos<- inner_join(capa_munison_df, casosacumdia2, by="id")
capa_munison_casos <- mutate(capa_munison_casos, movimiento=if_else(NUEVOS>0,1,0))
discrete <- c("0" = "#58bcbc", "1" = "#01787e")
Mapa_mov <- ggplot(capa_munison_casos, aes(map_id = id)) +
geom_polygon(data=capa_son, aes(x=long, y=lat, group=group),
fill="transparent", color="black", size=1.5) +
geom_polygon(data=capa_munison, aes(x=long, y=lat, group=group),
fill="gray90", color="white", size=0.3) +
geom_map_interactive(aes(fill = factor(movimiento), tooltip=capa_munison_casos$tooltip,data_id=id),color = "white",size=0.5, map = capa_munison_df) +
scale_fill_manual(values = discrete, breaks= c("0", "1"))+
theme_void() +
theme(plot.title = (element_text(family = "Lato Black", size = 15, color = "#01A2AC")), rect = element_rect(fill = "transparent"),
legend.position = "none",
plot.background = element_rect(fill = "transparent", color = NA),
legend.key.height = unit (2, "cm"), axis.text = element_blank(),
legend.text = element_text(family = "Lato Light", size = 6, color = "black"),
legend.title = element_blank(),
plot.caption = element_text(family = "Lato Light", size = 8, color = "gray50"),
axis.title = element_blank()) +
labs(axis = NULL, y = NULL, x = NULL, title  = NULL,  fill = NULL, caption = NULL)
ggsave("movimientos.png",Mapa_mov, bg = "transparent", height = 25.9, width = 25.9, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.5, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_npg() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.5, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_npg() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.5, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_ncr() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.5, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_ncr_npg() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.5, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_nejm() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.7, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_nejm() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.7, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_ucscgb() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.7, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_jco() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_d3() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días)", x = "Casos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Decesosprom <- Decesoss %>% group_by(MUNICIPIO) %>% mutate(Decesos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Decesosprom <- Decesos %>% group_by(MUNICIPIO) %>% mutate(Decesos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Decesosd <- ggplot(subset(Decesosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Decesos diarios (promedio móvil 7 días)", x = "Decesos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Decesosd
Decesosprom <- Decesos %>% group_by(MUNICIPIO) %>% mutate(Decesos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Decesosd <- ggplot(subset(Decesosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = Decesos, y = Decesos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Decesos diarios (promedio móvil 7 días)", x = "Decesos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Decesosd
Decesosprom <- Decesos %>% group_by(MUNICIPIO) %>% mutate(Decesos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Decesosd <- ggplot(subset(Decesosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = DECESOS, y = Decesos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Decesos diarios (promedio móvil 7 días)", x = "Decesos acumulados",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Decesosd
ggsave("decesosdacum.png",Decesosd, bg = "transparent", height = 25, width = 25, units = "cm")
Decesosprom <- Decesos %>% group_by(MUNICIPIO) %>% mutate(Decesos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Decesosd <- ggplot(subset(Decesosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = DECESOS, y = Decesos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#993366"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#993366"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Decesos diarios (promedio móvil 7 días)", x = "Decesos acumulados",legend= NULL, title  = "Decesos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Decesosd
ggsave("decesosdacum.png",Decesosd, bg = "transparent", height = 25, width = 25, units = "cm")
Decesosprom <- Decesos %>% group_by(MUNICIPIO) %>% mutate(Decesos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Decesosd <- ggplot(subset(Decesosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = DECESOS, y = Decesos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#993366"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#993366"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Decesos diarios (promedio móvil 7 días)", x = "Decesos acumulados",legend= NULL, title  = "Decesos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com")
Decesosd
ggsave("decesosdacum.png",Decesosd, bg = "transparent", height = 25, width = 25, units = "cm")
Decesosprom <- Decesos %>% group_by(MUNICIPIO) %>% mutate(Decesos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Decesosd <- ggplot(subset(Decesosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = DECESOS, y = Decesos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#993366"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#993366"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Decesos diarios (promedio móvil 7 días)", x = "Decesos acumulados",legend= NULL, title  = "Decesos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_y_continuous (expand = c(0, 0)) + scale_x_continuous (expand = c(0, 0))
Decesosd
ggsave("decesosdacum.png",Decesosd, bg = "transparent", height = 25, width = 25, units = "cm")
view(Decesosprom)
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 15, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 15, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días, log)", x = "Casos acumulados (log)",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 12, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 12, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios (promedio móvil 7 días, log)", x = "Casos acumulados (log)",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Decesosprom <- Decesos %>% group_by(MUNICIPIO) %>% mutate(Decesos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Decesosd <- ggplot(subset(Decesosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = DECESOS, y = Decesos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#993366"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 12, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 12, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#993366"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Decesos diarios (promedio móvil 7 días)", x = "Decesos acumulados",legend= NULL, title  = "Decesos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_y_continuous (expand = c(0, 0)) + scale_x_continuous (expand = c(0, 0))
Decesosd
ggsave("decesosdacum.png",Decesosd, bg = "transparent", height = 25, width = 25, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 12, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 12, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios\n(promedio móvil 7 días, log)", x = "Casos acumulados\n(log)",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
Decesosprom <- Decesos %>% group_by(MUNICIPIO) %>% mutate(Decesos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Decesosd <- ggplot(subset(Decesosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = DECESOS, y = Decesos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#993366"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 12, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 12, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#993366"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Decesos diarios\n(promedio móvil 7 días)", x = "Decesos acumulados",legend= NULL, title  = "Decesos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_y_continuous (expand = c(0, 0)) + scale_x_continuous (expand = c(0, 0))
Decesosd
ggsave("decesosdacum.png",Decesosd, bg = "transparent", height = 25, width = 25, units = "cm")
Casosprom <- Casos %>% group_by(MUNICIPIO) %>% mutate(Casos.media.7d=round(rollmeanr(x=NUEVOS, 7, fill = 0),1))
Casosd <- ggplot(subset(Casosprom, MUNICIPIO %in% c("Hermosillo", "Cajeme", "Nogales", "San Luis Río Colorado", "Navojoa", "Caborca", "Guaymas"))) +
geom_line(mapping = aes(x = CASOS, y = Casos.media.7d, color= MUNICIPIO, label= MUNICIPIO), size=1.5, alpha=0.6, arrow=arrow(type="open", length=unit(0.20,"cm"))) +
scale_color_locuszoom() +
theme(axis.line = element_line(linetype = "solid"), plot.margin = margin(1, 1, 0.5, 0.8, "cm"),
plot.title = element_text(family = "Lato Black", size = 40,color = "#01A2AC"),  plot.subtitle = element_text(family = "Lato Light", size = 16, color = "black"), legend.title = element_blank(),
strip.text = element_text(family = "Lato Black", size = 16),
axis.text = element_text(family = "Lato", size =10),
panel.grid.major = element_line(colour = "white", size= 1),
panel.grid.minor = element_line(colour = "white", size=0.2), plot.background = element_rect(fill = "white", color = "black", size = 5),
axis.title.x = element_text(family = "Lato Light", size = 12, hjust=1),axis.title.y = element_text(family = "Lato Light", size = 12, hjust=1), plot.caption = element_text(family = "Lato", size = 10, color = "#01A2AC"),
panel.background = element_rect(fill = "gray95"), legend.text = element_text(family = "Lato", size = 12),
legend.position = "top", legend.justification="left") +labs(y = "Casos diarios\n(promedio móvil 7 días, log)", x = "Casos acumulados (log)",legend= NULL, title  = "Casos de Covid-19\nen los municipios de Sonora", subtitle= "Corte al 01 de agosto de 2020", caption ="\nFuente: Secretaría de Salud del Estado de Sonora\nwww.luisarmandomoreno.com") + scale_x_continuous(trans = "log10") + scale_y_continuous(trans = "log10")
ggplotly(Casosd, tooltip = c("y","label", "x"))  %>%
layout(legend = list(orientation = "h",
y = 80, x = 0))
Casosd
ggsave("casosdacum.png",Casosd, bg = "transparent", height = 25, width = 25, units = "cm")
